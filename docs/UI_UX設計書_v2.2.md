# UI/UX設計書 v2.2

**作成日**: 2025年11月7日  
**更新日**: 2026年1月4日  
**バージョン**: 2.2  
**ステータス**: 確定版  
**対象**: Phase 1 リリース版  

---

## 📋 更新履歴

### v2.2 (2026-01-04)
- **パッシブ表示機能**追加
- パッシブ封印時のグレーアウトUI追加
- パッシブのキーワードリンク対応

### v2.1 (2025-12-29)
- **キーワードリンク機能**（シャドバ風）追加
- ゲーム用語辞典追加
- 技説明文のリンク仕様追加

### v2.0 (2025-11-07)
- Phase 1完全仕様書v3.0に基づき全面改訂
- 8タブ構成に更新（回復タブ追加）
- モンスター体力制UI追加

---

## 🔗 キーワードリンク機能（シャドバ風）

### 概要

技やアビリティの説明文中に含まれる**ゲーム用語**をタップすると、詳細な説明がポップアップ表示される機能。シャドウバースの「キーワード能力」システムを参考にした実装。

### 対象キーワード一覧

#### 1. ダメージ関連

| キーワード | 内部値 | ポップアップ説明 |
|------------|--------|------------------|
| **ダメージ軽減** | 25% | 自分がダメージを受ける時、受けるダメージを**25%軽減**する。 |
| **大幅に軽減** | 50% | 自分がダメージを受ける時、受けるダメージを**50%軽減**する。※次の1回のみ |
| **固定ダメージ** | - | 防御力やバフ・デバフを無視してダメージを与える。 |
| **HP吸収** | - | 与えたダメージの一定割合、自分のHPを回復する。 |

#### 2. 状態異常

| キーワード | ポップアップ説明 |
|------------|------------------|
| **毒** | 毎ターン終了時、最大HPの**4%**のダメージを受ける。（3ターン） |
| **火傷** | 毎ターン終了時、最大HPの**3%**のダメージを受ける。攻撃が**10%低下**する。（3ターン） |
| **瘴気** | 毎ターン終了時、最大HPの**3%**のダメージを受ける。魔力が**10%低下**する。（3ターン） |
| **麻痺** | 素早さが**20%低下**する。（3ターン） |
| **拘束** | このターンと次のターン、**交代できない**。（2ターン） |
| **封印** | **最もコストが高い技**が使用できなくなる。（2ターン） |
| **魅了** | 受けるダメージが**15%増加**する。（2ターン） |
| **恐怖** | 与えるダメージが**15%減少**する。（2ターン） |
| **悪夢** | 毎ターン終了時、最大HPの**3%**のダメージを受ける。回復効果が**50%減少**する。（3ターン） |

#### 3. ステータス変化

| キーワード | ポップアップ説明 |
|------------|------------------|
| **↑** / **上昇** | 対象のステータスが**1段階上昇**する。（約+25%） |
| **↑↑** / **大幅に上昇** | 対象のステータスが**2段階上昇**する。（約+50%） |
| **↓** / **低下** | 対象のステータスが**1段階低下**する。（約-20%） |
| **↓↓** / **大幅に低下** | 対象のステータスが**2段階低下**する。（約-33%） |

#### 4. 回復関連

| キーワード | 内部値 | ポップアップ説明 |
|------------|--------|------------------|
| **少し回復** | 15 | HPを**15**回復する。 |
| **回復** | 30 | HPを**30**回復する。 |
| **多く回復** | 50 | HPを**50**回復する。 |
| **大きく回復** | 80 | HPを**80**回復する。 |

#### 5. 特殊効果

| キーワード | ポップアップ説明 |
|------------|------------------|
| **先制** | 相手より先に行動できる。（優先度+1） |
| **強先制** | 先制技よりも先に行動できる。（優先度+2） |
| **後攻** | 相手より後に行動する。（優先度-1） |
| **確定** | 100%の確率で発動する。運に左右されない。 |
| **クリティカル** | 通常の**1.5倍**のダメージを与える。 |
| **弱点** | 属性相性で有利な場合、ダメージが**1.8倍**になる。 |
| **連続使用不可** | この技を使った次のターン、同じ技は使用できない。 |

#### 6. フィールド効果

| キーワード | ポップアップ説明 |
|------------|------------------|
| **フィールド** | 場全体に効果を及ぼす。両プレイヤーに影響する。 |
| **灼熱** | 炎属性技の威力が**+50%**、水属性技の威力が**-30%**になる。（5ターン） |
| **トリックルーム** | 同じ優先度の技を使う場合、**素早さが低いほど先に行動**できる。（5ターン） |

#### 7. パッシブ関連

| キーワード | ポップアップ説明 |
|------------|------------------|
| **パッシブ** | 種族が持つ固有の特性。常に発動し、選択不要。特定の技やアビリティで**封印**されることがある。 |
| **パッシブ封印** | パッシブの効果が無効化される。持続ターンは技により異なる。 |

---

## 🔹 パッシブ表示機能

### 概要

各モンスターは種族に応じた**パッシブ**（種族特性）を持つ。パッシブは常に発動し、選択不要。バトル中に封印される場合があり、その状態をUIで明確に示す。

### 種族パッシブ一覧

| 種族 | パッシブ名 | 効果 |
|------|--------------|------|
| 人間 (human) | 装備の心得 | 装備枚+1 |
| 天使 (angel) | 神の加護 | 毎ターンHP8回復 |
| 悪魔 (demon) | 除去 | 攻撃命中時、相手のバフを1つ解除 |
| 竜 (dragon) | 龍の耐性 | 状態異常は1種類のみ（上書き） |
| 機械 (mechanoid) | 電子制御 | 受ける状態異常の効果時間-1T |
| 霊 (spirit) | 霊媒強化 | 与える状態異常の効果時間+1T |
| 変異 (mutant) | 多彩な適応 | 技スロット+1 |

### バトル画面での表示

```
┌─────────────────────────────────────────┐
│ 【自分のモンスター】                      │
├─────────────────────────────────────────┤
│                                         │
│  炙烈アスモ  Lv.45  炎属性              │
│  HP: ████████░░ 160/200              │
│                                         │
│  【パッシブ】 除去                 [?]   │
│  「攻撃命中時、相手のバフを1つ解除」      │
│       ↑タップでポップアップ               │
│                                         │
└─────────────────────────────────────────┘
```

### パッシブ封印時の表示（グレーアウト）

```
┌─────────────────────────────────────────┐
│ 【自分のモンスター】                      │
├─────────────────────────────────────────┤
│                                         │
│  炙烈アスモ  Lv.45  炎属性              │
│  HP: ████████░░ 160/200              │
│                                         │
│  【パッシブ】 除去      🚫封印中(2T)   [?]   │
│  ■■■■■■■■■■■■■■■■■■■■■■■■■■      │
│  （グレー表示 + 取り消し線）               │
│                                         │
└─────────────────────────────────────────┘
```

### UI実装仕様

#### 通常状態

```yaml
表示位置: HPバーの下
ラベル: "【パッシブ】" + パッシブ名
アイコン: 種族アイコン（オプション）
タップ動作: キーワードリンクと同様のポップアップ表示
テキスト色: #FFFFFF（白）
```

#### 封印状態

```yaml表示変更:
  - パッシブ名: グレーアウト + 取り消し線
  - テキスト色: #808080（グレー）
  - アイコン: 🚫（禁止マーク）
  - 残りターン表示: "封印中(XT)"
  
タップ時ポップアップ:
  - タイトル: "【パッシブ封印】"
  - 説明: "パッシブの効果が無効化されています。残りXターンで解除されます。"
  - 原因: "グラムのアビリティ封じにより封印"（表示オプション）
```

#### スタイル定義

```css
/* パッシブ通常状態 */
.passive-normal {
  color: #FFFFFF;
  background: linear-gradient(90deg, #4A90D9, #357ABD);
  border-radius: 4px;
  padding: 4px 8px;
}

/* パッシブ封印状態 */
.passive-sealed {
  color: #808080;
  background: #3D3D3D;
  text-decoration: line-through;
  opacity: 0.6;
}

/* 封印マーク */
.passive-seal-icon {
  color: #FF4444;
  margin-left: 8px;
}
```

---

### UI実装仕様

#### ポップアップデザイン

```
┌─────────────────────────────────────┐
│ 【ダメージ軽減】           [×閉じる] │
├─────────────────────────────────────┤
│                                     │
│   自分がダメージを受ける時、        │
│   受けるダメージを25%軽減する。     │
│                                     │
│   ※この効果は重複しない            │
│                                     │
└─────────────────────────────────────┘
```

#### 技説明文の表示例

```
┌─────────────────────────────────────┐
│ 【守護結界】                        │
│ コスト: 3  属性: 光                 │
├─────────────────────────────────────┤
│                                     │
│ 3ターンの間、自分と味方全体に       │
│ [ダメージ軽減]を付与する。          │
│  ↑                                  │
│  タップでポップアップ表示           │
│                                     │
└─────────────────────────────────────┘
```

#### 技術仕様

```yaml
キーワード検出:
  - 技説明文をパース
  - 登録キーワードに一致する文字列を検出
  - 該当部分をタップ可能なリンクに変換

表示形式:
  - キーワード部分: 下線+青色 or ハイライト
  - タップ時: モーダルまたはツールチップ表示
  - 閉じる: 外側タップ or ×ボタン

パフォーマンス:
  - キーワードマスタはアプリ起動時にキャッシュ
  - 正規表現による高速マッチング
```

---

### キーワードマスタJSON

```json
{
  "keywords": [
    {
      "id": "damage_reduction",
      "display_name": "ダメージ軽減",
      "internal_value": 25,
      "unit": "%",
      "description": "自分がダメージを受ける時、受けるダメージを25%軽減する。",
      "note": "この効果は重複しない"
    },
    {
      "id": "damage_reduction_large",
      "display_name": "大幅に軽減",
      "internal_value": 50,
      "unit": "%",
      "description": "自分がダメージを受ける時、受けるダメージを50%軽減する。",
      "note": "次の1回のみ有効"
    },
    {
      "id": "burn",
      "display_name": "火傷",
      "description": "毎ターン終了時、最大HPの3%のダメージを受ける。攻撃が10%低下する。",
      "duration": 3,
      "category": "status_condition"
    }
  ]
}
```

---

## 🎯 設計方針

### 基本コンセプト

```yaml
ターゲット:
  - 10代後半〜30代
  - スマホゲーム経験者
  - ポケモン・シャドウバース好き

設計思想:
  - シンプルで分かりやすい
  - 素早いアクセス
  - モダンなデザイン
  - ストレスのない操作感
  - 用語はリンクで説明（初心者にも優しい）
```

### デザインガイドライン

#### カラーパレット

```yaml
メインカラー:
  - プライマリ: #FF6B6B (赤系)
  - セカンダリ: #4ECDC4 (青緑系)
  - アクセント: #FFE66D (黄色系)

属性カラー:
  - 炎: #FF4500
  - 水: #1E90FF
  - 雷: #FFD700
  - 風: #00CED1
  - 大地: #8B4513
  - 光: #FFFACD
  - 闇: #4B0082

カテゴリカラー:
  - 幻種: #FFD700 (金)
  - 希少種: #9370DB (紫)
  - 一般種: #4169E1 (青)

システムカラー:
  - 成功: #28A745
  - 警告: #FFC107
  - エラー: #DC3545
  - 情報: #17A2B8
  - キーワードリンク: #3498DB (青)
```

#### タイポグラフィ

```yaml
フォントファミリー:
  - 見出し: Noto Sans JP Bold
  - 本文: Noto Sans JP Regular
  - 数値: Roboto Medium

フォントサイズ:
  - H1: 24px
  - H2: 20px
  - H3: 18px
  - Body: 14px
  - Caption: 12px
  - Small: 10px
  - キーワードリンク: 14px (下線付き)
```

---

## 🏠 ホーム画面（8タブ構成）

### ワイヤーフレーム

```
┌─────────────────────────────────────────┐
│ [アイコン] プレイヤー太郎 Lv.35          │
│ 💎5,000  💰150,000  🎁(3) 📋(5)         │
├─────────────────────────────────────────┤
│                                         │
│     【お気に入りモンスター表示】        │
│          (2D/3Dモデル)                  │
│        「炎の竜 Lv.50」                 │
│                                         │
│     ┌─────────────────────┐       │
│     │ HP: ████████░░ 450/500 │       │
│     └─────────────────────┘       │
│                                         │
├─────────────────────────────────────────┤
│ 【バナー領域】                          │
│ ┌──────────────────────────┐      │
│ │ 新イベント開催中！              │      │
│ │ ドラフトバトル                  │      │
│ └──────────────────────────┘      │
├─────────────────────────────────────────┤
│ 【8タブナビゲーション】                 │
│ ┌───┬───┬───┬───┬───┬───┬───┬───┐│
│ │バト│冒険│預か│アイ│召喚│錬成│回復│他  ││
│ │ル  │   │り所│テム│   │   │   │   ││
│ └───┴───┴───┴───┴───┴───┴───┴───┘│
└─────────────────────────────────────────┘
```

### 8タブ詳細

```yaml
1. バトルタブ:
   - カジュアルマッチ
   - フレンドバトル
   
2. 冒険タブ:
   - エリア選択
   - ランダムエンカウント
   
3. 預かり所タブ:
   - 所持モンスター一覧
   - パーティー編成
   
4. アイテムタブ:
   - 装備/素材/消耗品/貴重品
   
5. 召喚タブ:
   - ガチャ
   
6. 錬成タブ:
   - 装備作成
   
7. 回復タブ:
   - モンスターセンター
   - 癒しの女神
   
8. その他タブ:
   - ショップ/設定/フレンド/ヘルプ
```

---

## ⚔️ バトル画面

### 技選択UI（キーワードリンク対応）

```
┌─────────────────────────────────────────┐
│ 【技選択】                              │
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────┐   │
│ │ 守護結界        コスト: 3        │   │
│ │ 光属性  サポート                 │   │
│ │                                  │   │
│ │ 3ターンの間、自分と味方に        │   │
│ │ [ダメージ軽減]を付与する。       │   │
│ │    ↑タップで説明表示            │   │
│ └─────────────────────────────────┘   │
│                                         │
│ ┌─────────────────────────────────┐   │
│ │ 獄炎            コスト: 3-6      │   │
│ │ 炎属性  攻撃                     │   │
│ │                                  │   │
│ │ コストに応じて威力が変化。       │   │
│ │ [火傷]を確定で付与。             │   │
│ │    ↑タップで説明表示            │   │
│ └─────────────────────────────────┘   │
│                                         │
└─────────────────────────────────────────┘
```

---

## 📱 レスポンシブデザイン

### 画面サイズ対応

```yaml
スマートフォン (縦):
  - 解像度: 375x812 〜 428x926
  - UI: シングルカラム
  - ナビゲーション: 下部タブ

タブレット (横):
  - 解像度: 1024x768 〜 1366x1024
  - UI: 2カラム
  - ナビゲーション: サイドバー

PC (横):
  - 解像度: 1920x1080 〜
  - UI: 3カラム
  - ナビゲーション: 上部 + サイドバー
```

### タッチ操作

```yaml
タップ:
  - ボタン押下
  - カード選択
  - モーダル表示
  - キーワードリンク（ポップアップ表示）

スワイプ:
  - タブ切替
  - バナースクロール
  - リスト閲覧

ロングタップ:
  - 詳細情報表示
  - コンテキストメニュー

ピンチ:
  - 画像ズーム（モンスター詳細など）
```

---

## 🎨 アニメーション

### 基本アニメーション

```yaml
画面遷移:
  - フェードイン/アウト: 300ms
  - スライド: 250ms
  - モーダル表示: 200ms

要素アニメーション:
  - ボタン押下: scale(0.95), 100ms
  - カード表示: fadeIn + slideUp, 300ms
  - リスト項目: stagger, 50ms間隔
  - キーワードポップアップ: fadeIn, 150ms

バトルアニメーション:
  - HP減少: 500ms
  - コストゲージ: 300ms
  - 技エフェクト: 1000ms
  - 交代: 800ms
```

---

## ✅ 実装チェックリスト

### Phase 1 必須画面

```yaml
キーワードリンク機能: □
  - キーワードマスタJSON: □
  - パース処理: □
  - ポップアップUI: □
  - 全技説明文への適用: □

ホーム画面: □
  - 8タブナビゲーション: □
  - お気に入りモンスター表示: □
  - HPバー表示: □
  - バナー表示: □
  - 通知バッジ: □

バトルタブ: □
  - バトル選択画面: □
  - バトル画面: □
  - コストゲージ: □
  - 独自HPバー: □
  - 技選択UI（キーワードリンク対応）: □
  - 交代UI: □
  - 待機ボタン: □

その他: □
  - ゲーム用語辞典画面: □
  - ヘルプ画面（キーワード一覧）: □
```

---

**このドキュメントは Phase 1 実装の唯一のUI/UX設計書です。**  
**キーワードリンク機能により、初心者でも用語を理解しやすいUIを実現します。**

---

END OF DOCUMENT
