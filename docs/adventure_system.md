# 冒険システム仕様書 v2.0

**作成日**: 2025-12-16  
**最終更新**: 2026-01-06  
**バージョン**: v2.0  
**ステータス**: Phase1 確定版（stage_list.md v1.1準拠）

---

## 1. 概要

冒険システムはPvEコンテンツの中核。ステージを攻略し、素材・経験値・報酬を獲得する。

---

## 2. コンテンツ構成

### 2.1 冒険タイプ

| タイプ | 説明 | リセット |
|--------|------|---------|
| **ストーリー** | メインコンテンツ、順次解放 | なし（永続） |
| **デイリー** | 日替わりクエスト | 毎日0時 |
| **イベント** | 期間限定コンテンツ | イベント終了時 |

### 2.2 進行フロー

```
【ストーリー進行】
エリア選択 → 通常ステージ（5つ）→ ボス解放 → ボス撃破 → 次エリア解放

【1ステージの流れ】
1. ステージ選択
2. モンスター出現（ランダム1体）
3. バトル開始（現在HP使用）
4. 勝利 → 報酬獲得、次ステージ解放
5. 敗北 → 再挑戦可能（進捗維持）

【ボス戦の流れ】
1. 通常ステージ5つクリアでボス解放
2. ボス戦開始（最大3体のボス）
3. 勝利 → 大量報酬 + 次エリア解放
4. 敗北 → 再挑戦可能
```

---

## 3. ステージ構成

### 3.1 基本ルール

| 項目 | 内容 |
|------|------|
| 総エリア数 | **10エリア** |
| 各エリア構成 | **通常5ステージ + ボス1ステージ** |
| 総ステージ数 | **60ステージ**（通常50 + ボス10） |
| レベル上限 | **50** |

### 3.2 エリア一覧

| No | エリア名 | 難易度 | 推奨Lv | 主属性 | 解放条件 |
|----|---------|--------|--------|--------|---------|
| 1 | 始まりの草原 | ★☆☆☆☆ | 1-5 | 無 | 初期解放 |
| 2 | 深緑の森 | ★☆☆☆☆ | 5-10 | 風 | エリア1クリア |
| 3 | 炎熱の洞窟 | ★★☆☆☆ | 10-15 | 炎 | エリア2クリア |
| 4 | 水晶の湖畔 | ★★☆☆☆ | 15-20 | 水 | エリア3クリア |
| 5 | 雷鳴の峡谷 | ★★★☆☆ | 20-25 | 雷 | エリア4クリア |
| 6 | 大地の迷宮 | ★★★☆☆ | 25-30 | 地 | エリア5クリア |
| 7 | 天空の神殿 | ★★★★☆ | 30-35 | 光 | エリア6クリア |
| 8 | 冥府の深淵 | ★★★★☆ | 35-40 | 闇 | エリア7クリア |
| 9 | 機械の廃都 | ★★★★★ | 40-45 | 雷/無 | エリア8クリア |
| 10 | 混沌の終焉 | ★★★★★ | 45-50 | 全属性 | エリア9クリア |

### 3.3 レアモンスター出現率

| エリア | 希少種出現率 | 幻種出現率 |
|--------|-------------|-----------|
| 1-4 | 0% | 0% |
| 5-6 | 3% | 0% |
| 7-8 | 5% | 1% |
| 9-10 | 8% | 2% |

### 3.4 ステージデータ構造

```json
{
  "stage_id": "1-1",
  "name": "草原の入口",
  "area_id": 1,
  "stage_type": "normal",
  "difficulty": 1,
  "recommended_level": 1,
  "description": "最初の一歩。弱いスライムが出現",
  "encounter_monster_ids": ["slime_001", "slime_002"],
  "rewards": {
    "exp": { "min": 10, "max": 15 },
    "gold": { "min": 5, "max": 10 },
    "drop_items": [...]
  }
}
```

---

## 4. バトルシステム連携

### 4.1 HPの扱い

```
【冒険中のHP】
- 現在HPを使用（最大HPではない）
- バトル後もHPは自動回復しない
- 複数ステージを連続攻略する場合、HP管理が重要

【HP回復手段】
- 時間経過（5分ごとに5%回復）
- 回復アイテム使用（癒しの葉/花/雫）
- ホーム画面の回復機能
```

### 4.2 オートバトル

```
【AUTO機能】
- 連続でステージを自動実行
- 最大10回まで設定可能
- 敗北時は自動停止

【AUTO中の動作】
1. ステージ開始
2. AI自動行動
3. 勝利 → 報酬獲得 → 次ステージへ
4. 敗北 → AUTO終了
5. ボス到達 → AUTO終了（手動でボス戦）
```

---

## 5. ボス戦システム

### 5.1 ボス戦の仕様

| 項目 | 内容 |
|------|------|
| 解放条件 | 通常ステージ5つクリア |
| ボス構成 | 最大3体のボスモンスター |
| 難易度 | 通常モンスターの約1.5倍ステータス |
| 再挑戦 | 何度でも可能 |

### 5.2 ボス一覧

| エリア | ボス名 | 種族 | 属性 | 特徴 |
|--------|--------|------|------|------|
| 1 | 草原の主 | Mutant | 無 | 巨大スライム。HPが高い |
| 2 | 森の守護者 | Spirit | 風 | 古代樹の精霊。回復能力持ち |
| 3 | 炎竜 | Dragon | 炎 | 炎を纏う竜。高火力 |
| 4 | 湖底の主 | Dragon | 水 | 水竜。状態異常攻撃 |
| 5 | 雷獣 | Mutant | 雷 | 雷を操る獣。高速 |
| 6 | 迷宮の番人 | Mechanoid | 地 | 古代ゴーレム。高防御 |
| 7 | 天空の守護者 | Angel | 光 | 大天使。回復＋攻撃 |
| 8 | 冥府の王 | Demon | 闘 | 魔王。デバフ特化 |
| 9 | 機械神 | Mechanoid | 雷/無 | 古代兵器。全能力高め |
| 10 | 混沌の化身 | 全種族 | 全 | 最強ボス。全属性使用 |

### 5.3 ボス撃破報酬

| エリア | 初回EXP | 初回G | 周回EXP | 周回G | 覇者の勲章 |
|--------|---------|-------|---------|-------|-----------|
| 1 | 100 | 100 | 30 | 20 | 初回3, 周回1 |
| 2 | 200 | 200 | 60 | 40 | 初回3, 周回1 |
| 3 | 400 | 400 | 100 | 80 | 初回3, 周回1 |
| 4 | 600 | 600 | 150 | 120 | 初回3, 周回1 |
| 5 | 800 | 800 | 200 | 160 | 初回3, 周回1 |
| 6 | 1000 | 1000 | 250 | 200 | 初回3, 周回1 |
| 7 | 1500 | 1500 | 350 | 300 | 初回3, 周回1 |
| 8 | 2000 | 2000 | 450 | 400 | 初回3, 周回1 |
| 9 | 3000 | 3000 | 600 | 500 | 初回3, 周回1 |
| 10 | 5000 | 5000 | 1000 | 800 | 初回5, 周回1 |

---

## 6. 報酬システム

### 6.1 通常戦闘報酬（1戦あたり）

| エリア | 経験値 | ゴールド | 備考 |
|--------|--------|---------|------|
| 1 | 10-15 | 5-10 | 序盤 |
| 2 | 15-25 | 10-20 | |
| 3 | 25-40 | 20-35 | |
| 4 | 40-60 | 35-50 | |
| 5 | 60-80 | 50-70 | 中盤 |
| 6 | 80-100 | 70-90 | |
| 7 | 100-130 | 90-120 | |
| 8 | 130-160 | 120-150 | |
| 9 | 160-200 | 150-200 | 終盤 |
| 10 | 200-250 | 200-300 | |

### 6.2 ドロップシステム

```
【ドロップ判定】
1. ステージのdrop_itemsからアイテム候補を取得
2. 各アイテムのdrop_rateで判定
3. ボス戦の場合は確率×1.5

【ドロップ率の目安】
- 基本素材（★1-2）: 20-25%
- 属性素材: 10-30%（エリアにより変動）
- 種族素材（通常）: 5%
- 種族素材（ボス）: 15%
- 希少種の証: 10%（希少種撃破時）
- 幻種の証: 10%（幻種撃破時）
```

### 6.3 初回クリア報酬

```
【初回クリア時のみ】
- ボス撃破: 経験値・ゴールド大幅UP
- 覇者の勲章: 3個（エリア10は5個）
- カテゴリ素材: 1個

【周回時】
- 経験値、ゴールド、素材のみ
- 覇者の勲章: 1個
```

---

## 7. 探検システム（派遣）

### 7.1 基本仕様

| 項目 | 内容 |
|------|------|
| 解放条件 | 各エリアクリア後、そのエリアの探検が解放 |
| 派遣中の制限 | 派遣モンスターはバトルに使用不可 |
| 同時探検数 | 最大3箇所 |
| 派遣時間 | **1時間 / 4時間 / 8時間** から選択 |

### 7.2 探検先一覧

| エリア | 探検先名 | 必要Lv | 主な報酬 |
|--------|---------|--------|---------|
| 1 | 始まりの草原 | 1 | 粗鉄鉱、獣の骨 |
| 2 | 深緑の森 | 5 | 粗鉄鉱、獣の骨、風の欠片 |
| 3 | 炎熱の洞窟 | 10 | 魔鉱石、古代樹の枝、炎の欠片 |
| 4 | 水晶の湖畔 | 15 | 魔鉱石、古代樹の枝、水の欠片 |
| 5 | 雷鳴の峡谷 | 20 | 精霊石、星屑の砂、雷の欠片 |
| 6 | 大地の迷宮 | 25 | 精霊石、星屑の砂、地の欠片 |
| 7 | 天空の神殿 | 30 | ミスリル、霊魂の欠片、光の欠片 |
| 8 | 冥府の深淵 | 35 | ミスリル、霊魂の欠片、闇の欠片 |
| 9 | 機械の廃都 | 40 | オリハルコン、混沌の核、雷の欠片 |
| 10 | 混沌の終焉 | 45 | オリハルコン、混沌の核、混沌の欠片 |

### 7.3 1時間あたりの獲得量

| エリア | 経験値/h | ゴールド/h | 基本素材①/h | 基本素材②/h | 属性素材/h |
|--------|---------|-----------|------------|------------|-----------|
| 1 | 20 | 10 | 0.3個 | 0.2個 | - |
| 2 | 35 | 20 | 0.3個 | 0.2個 | 0.1個 |
| 3 | 50 | 30 | 0.25個 | 0.15個 | 0.15個 |
| 4 | 70 | 45 | 0.25個 | 0.15個 | 0.15個 |
| 5 | 90 | 60 | 0.2個 | 0.1個 | 0.2個 |
| 6 | 110 | 80 | 0.2個 | 0.1個 | 0.2個 |
| 7 | 140 | 100 | 0.15個 | 0.05個 | 0.25個 |
| 8 | 170 | 130 | 0.15個 | 0.05個 | 0.25個 |
| 9 | 200 | 160 | 0.1個 | 0.05個 | 0.3個 |
| 10 | 250 | 200 | 0.1個 | 0.05個 | 0.3個 |

※ 端数は確率として処理（0.3個 = 30%で1個獲得）

### 7.4 カテゴリ素材（探検限定・低確率）

| エリア | カテゴリ素材 | 獲得確率/h |
|--------|------------|-----------|
| 1-2 | 護符の素 | 2% |
| 3-4 | 指輪の欠片 | 2% |
| 5 | 紋章の欠片 | 2% |
| 6 | 秘宝の欠片 | 2% |
| 7 | 魔具の素 | 3% |
| 8 | 呪符の素 | 3% |
| 9 | 武具の素 | 4% |
| 10 | 伝説の核 | 5% |

### 7.5 派遣時間ボーナス

| 派遣時間 | ボーナス倍率 | 計算例（エリア10・経験値） |
|---------|------------|------------------------|
| 1時間 | ×1.0 | 250 |
| 4時間 | ×1.1 | 250 × 4 × 1.1 = 1,100 |
| 8時間 | ×1.2 | 250 × 8 × 1.2 = 2,400 |

### 7.6 探検UIフロー

```
1. 探検タブを開く
2. 探検先を選択（解放済みエリアのみ）
3. 派遣するモンスターを選択（1体）
4. 派遣時間を選択（1h/4h/8h）
5. 探検開始
6. 時間経過後、報酬受け取り
```

---

## 8. 進捗管理

### 8.1 ユーザー進捗データ

```json
{
  "user_id": "xxx",
  "area_id": 1,
  "is_unlocked": true,
  "is_cleared": true,
  "stages_cleared": [true, true, true, true, true],
  "boss_unlocked": true,
  "boss_defeated": true,
  "total_clears": 15,
  "first_cleared_at": "2025-01-20T15:30:00Z"
}
```

### 8.2 解放条件の判定

```
【次エリア解放条件】
- 現エリアのボス撃破

【判定フロー】
1. ボス撃破時にuser_adventure_progressを更新
2. 次エリアのis_unlockedをtrueに
3. 探検先も同時に解放
4. クライアントに解放通知
```

---

## 9. デイリークエスト

### 9.1 日替わりコンテンツ

```
【リセット】
毎日0:00（サーバー時間）

【内容】
- 特定属性モンスター討伐
- 特定ステージ周回
- ボス撃破

【報酬】
- 経験値ボーナス
- ゴールドボーナス
- 日替わり素材
```

### 9.2 デイリー報酬

| クエスト | 条件 | 報酬 |
|----------|------|------|
| 冒険3回 | ステージ3回勝利 | 経験値×500 |
| ボス討伐 | ボス1体撃破 | ゴールド×1000 |
| 属性討伐 | 炎属性5体撃破 | 炎の欠片×3 |

---

## 10. イベントステージ

### 10.1 期間限定コンテンツ

```
【開催期間】
- 通常: 1-2週間
- 大型: 1ヶ月

【特徴】
- 限定モンスター出現
- 限定装備ドロップ
- 限定報酬

【難易度】
- 初級: 推奨Lv10
- 中級: 推奨Lv25
- 上級: 推奨Lv40
- 超級: 推奨Lv50（エンドコンテンツ）
```

---

## 変更履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|----------|
| **v2.0** | **2026-01-06** | **stage_list.md v1.1準拠に全面改修**: エリア10個、探検システム詳細化 |
| v1.0 | 2025-12-16 | 初版作成 |

---

## 関連ドキュメント

- [ステージ一覧](./stage_list.md)
- [バトルシステム仕様書](./battle_system_v8.7.md)
- [装備・アイテムシステム仕様書](./equipment_system.md)
- [素材一覧](./material_list.md)

---

END OF DOCUMENT
